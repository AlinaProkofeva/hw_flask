# HW FLASK

# Quickstart

    git clone ...
    cp .env.template .env

В .env указать переменные окружения

    docker-compose -up
_____________________
# Система прав

### Регистрация пользователя 

POST http://127.0.0.1:5000/register/

    {
    "email": "t@m.ru",
    "password": "12345"
    }

**Важно!** При успешной регистрации в ответе вы получите токен для авторизации.  **Сохраните его** и передавайте в заголовках в формате:

    "token": "b1fe6e90-663b-4199-ac12-167f0efb209d"

*Передача токена в **headers** необходима для создания, редактирования и удаления объявлений
_____________________________

### Авторизация пользователя 

POST http://127.0.0.1:5000/login/

    {
    "email": "t@m.ru",
    "password": "12345"
    }

При успешной авторизации в **session** будет помощен признак **is_logged**, по которому можно закрывать доступ к желаемым url (реализовано на примере восстановления токена)
_____________________________

### Восстановление утерянного токена пользователя

GET http://127.0.0.1:5000/remember_token/

**Важно!** метод доступен только после авторизации, по **is_logged** пользователю
_____________________________________________
## Работа с объявлениями
### Просмотр объявления

GET http://127.0.0.1:5000/advertisement/1/

_________________________________________________________
### Создание объявления

POST http://127.0.0.1:5000/advertisement/

    {
    "title": "Продам третью тумбочку",
    "description": "Из ИКЕИ за 100500",
    }

*B **headers** необходимо передать token пользователя

*user_id владельца будет присвоен объявлению **автоматически** на основании переданного токена
_________________________________________________________
### Изменение объявления 

PATCH http://127.0.0.1:5000/advertisement/1/

    {
    "title": "Продам третью тумбочку",
    "description": "Из ИКЕИ за миллион",
    }

**Важно!** Изменение владельца объявления запрещено. Действие доступно только владельцу

*B **headers** необходимо передать token пользователя
_________________________________________________________
### Удаление объявления 

DELETE http://127.0.0.1:5000/advertisement/1/

*B **headers** необходимо передать token пользователя. Действие доступно только владельцу
______________________________________________________

